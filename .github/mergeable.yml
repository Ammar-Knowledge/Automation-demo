version: 2
mergeable:
  - when: pull_request.*, pull_request_review.*
    validate:
      - do: title
        must_include:
          regex: '(^[A-z]+(-| )[0-9]+(:|-| )(\w|\W)+$)'
          pass:
            - do: comment
              payload:
                 body: >
                  :white_check_mark: <h2>Successfully checked PR Title</h2>
                  <h3>Your PR title is correct - following the template JIRA-IDs, Ready for Review!</h3>
          fail:
            - do: comment
              payload:
                 body: >
                  :warning: <h2>Please add Jira ticket id i.e. "JIRA-ID"</h2>
                  <h3>Check Fail!</h3>
         
  - when: pull_request.*, pull_request_review.*, push.*, commit.*
    validate:
      - do: commit
        message:
          regex: '^((build|chore|ci|docs|feat|fix|perf|refactor|revert|update|create|style|test)(\(\w+\))?(!)?(: (.*\s*)*))|(Merge (.*\s*)*)|(Initial commit$)'
          message: 'summarize the fix in less than 72 characters'
    pass:
      - do: comment
        payload:
           body: >
            :white_check_mark: <h2>Successfully checked</h2>
            <h3>Coventional Commit rules are being folowing here</h3>
    fail:
      - do: comment
        payload:
           body: >
            :warning: <h2>Please follow conventional Commits pattern open this [link](https://ammar-ahmed-butt.atlassian.net/wiki/spaces/PMP/pages/35232086/PR+Commits+Branching+Standards) to check correct them </h2>
             <h3>Check Fail!</h3>
            
  - when: pull_request.*, pull_request_review.*, push.*, commit.*
    validate:
      - do: commit
        must_include:
          regex: '(^[A-z]+(-| )[0-9]+(:|-| )(\w|\W)+$)'
          message: 'There are incomplete TODO task(s) unchecked'
    pass:
      - do: comment
        payload:
           body: >
            :white_check_mark: <h2>Successfully checked</h2>
            <h3>Commit is conatains the Jira ID ticket as well</h3>
      - do: checks
        status: 'success'
    fail:
      - do: comment
        payload:
           body: >
            :warning: <h2>Please follow conventional Commits pattern open this [link](https://ammar-ahmed-butt.atlassian.net/wiki/spaces/PMP/pages/35232086/PR+Commits+Branching+Standards) to check correct them,JIRA-ID should be in message</h2>
             <h3>Check Fail!</h3>
      - do: checks
        status: 'failure'
